<!-- 場地圖片 -->
<div class="pick-image">
  <label>
    <img src="http://lorempixel.com/200/160">
    <br>
    <input type="radio" name="location-image">
    <span class="text-warn">AYDYN 場地A</span>
  </label>
  <label>
    <img src="http://lorempixel.com/200/160">
    <br>
    <input type="radio" name="location-image">
    <span class="text-warn">AYDYN 場地B</span>
  </label>
  <label>
    <img src="http://lorempixel.com/200/160">
    <br>
    <input type="radio" name="location-image">
    <span class="text-warn">AYDYN 場地C</span>
  </label>
  <label>
    <img src="http://lorempixel.com/200/160">
    <br>
    <input type="radio" name="location-image">
    <span class="text-warn">AYDYN 場地D</span>
  </label>
  <label>
    <img src="http://lorempixel.com/200/160">
    <br>
    <input type="radio" name="location-image">
    <span class="text-warn">AYDYN 場地E</span>
  </label>
  <label>
    <img src="http://lorempixel.com/200/160">
    <br>
    <input type="radio" name="location-image">
    <span class="text-warn">AYDYN 場地F</span>
  </label>
</div>

<hr>
<!-- 場地內容 -->
<div class="pick-location">
  <!-- 場地資訊 -->
  <div class="loc-info">
    <h4></h4>
    <div>
      <span><i class="fa fa-map-marker"></i>台北市內湖區新湖一路85號4樓</span>
      <span><i class="fa fa-home"></i>35坪</span>
      <span><i class="fa fa-users"></i>最多可容納30人</span>
      <br>
      <span><i class="fa fa-plug"></i>場地設備：麥克風、音響、筆電</span>
    </div>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Qui sed illo ex! In amet, eum laborum consequatur commodi unde iste ipsa, eaque nesciunt harum, numquam aliquid nihil laudantium distinctio nobis.</p>
  </div>
  <!-- 場地圖片輪播 -->
  <div class="row loc-image">
    <div class="col-sm-7">
      <div class="col-xs-12" id="slider">
        <!-- Top part of the slider-->
        <div class="row">
          <div class="col-sm-12" id="carousel-bounding-box">
            <div class="carousel slide" id="myCarousel">
              <!-- Carousel items-->
              <div class="carousel-inner">
                <div class="active item" data-slide-number="0"><img src="http://placehold.it/514x332&amp;text=zero"/></div>
                <div class="item" data-slide-number="1"><img src="http://placehold.it/514x332&amp;text=1"/></div>
                <div class="item" data-slide-number="2"><img src="http://placehold.it/514x332&amp;text=2"/></div>
                <div class="item" data-slide-number="3"><img src="http://placehold.it/514x332&amp;text=3"/></div>
                <div class="item" data-slide-number="4"><img src="http://placehold.it/514x332&amp;text=4"/></div>
                <div class="item" data-slide-number="5"><img src="http://placehold.it/514x332&amp;text=5"/></div>
                <div class="item" data-slide-number="6"><img src="http://placehold.it/514x332&amp;text=6"/></div>
                <div class="item" data-slide-number="7"><img src="http://placehold.it/514x332&amp;text=7"/></div>
                <div class="item" data-slide-number="8"><img src="http://placehold.it/514x332&amp;text=8"/></div>
                <div class="item" data-slide-number="9"><img src="http://placehold.it/514x332&amp;text=9"/></div>
                <div class="item" data-slide-number="10"><img src="http://placehold.it/514x332&amp;text=10"/></div>
                <div class="item" data-slide-number="11"><img src="http://placehold.it/514x332&amp;text=11"/></div>
                <div class="item" data-slide-number="12"><img src="http://placehold.it/514x332&amp;text=12"/></div>
                <div class="item" data-slide-number="13"><img src="http://placehold.it/514x332&amp;text=13"/></div>
                <div class="item" data-slide-number="14"><img src="http://placehold.it/514x332&amp;text=14"/></div>
                <div class="item" data-slide-number="15"><img src="http://placehold.it/514x332&amp;text=15"/></div>
                <div class="item" data-slide-number="16"><img src="http://placehold.it/514x332&amp;text=16"/></div>
              </div>
              <!-- Carousel nav--><a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev"><span class="glyphicon glyphicon-chevron-left"></span></a><a class="right carousel-control" href="#myCarousel" role="button" data-slide="next"><span class="glyphicon glyphicon-chevron-right"></span></a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-5" id="slider-thumbs">
      <!-- Bottom switcher of slider-->
      <ul class="hide-bullets">
        <li class="col-sm-3"><a class="thumbnail" id="carousel-selector-0"><img src="http://placehold.it/150x150&amp;text=zero"/></a></li>
        <li class="col-sm-3"><a class="thumbnail" id="carousel-selector-1"><img src="http://placehold.it/150x150&amp;text=1"/></a></li>
        <li class="col-sm-3"><a class="thumbnail" id="carousel-selector-2"><img src="http://placehold.it/150x150&amp;text=2"/></a></li>
        <li class="col-sm-3"><a class="thumbnail" id="carousel-selector-3"><img src="http://placehold.it/150x150&amp;text=3"/></a></li>
        <li class="col-sm-3"><a class="thumbnail" id="carousel-selector-4"><img src="http://placehold.it/150x150&amp;text=4"/></a></li>
        <li class="col-sm-3"><a class="thumbnail" id="carousel-selector-5"><img src="http://placehold.it/150x150&amp;text=5"/></a></li>
        <li class="col-sm-3"><a class="thumbnail" id="carousel-selector-6"><img src="http://placehold.it/150x150&amp;text=6"/></a></li>
        <li class="col-sm-3"><a class="thumbnail" id="carousel-selector-7"><img src="http://placehold.it/150x150&amp;text=7"/></a></li>
        <li class="col-sm-3"><a class="thumbnail" id="carousel-selector-8"><img src="http://placehold.it/150x150&amp;text=8"/></a></li>
        <li class="col-sm-3"><a class="thumbnail" id="carousel-selector-9"><img src="http://placehold.it/150x150&amp;text=9"/></a></li>
        <li class="col-sm-3"><a class="thumbnail" id="carousel-selector-10"><img src="http://placehold.it/150x150&amp;text=10"/></a></li>
        <li class="col-sm-3"><a class="thumbnail" id="carousel-selector-11"><img src="http://placehold.it/150x150&amp;text=11"/></a></li>
        <li class="col-sm-3"><a class="thumbnail" id="carousel-selector-12"><img src="http://placehold.it/150x150&amp;text=12"/></a></li>
        <li class="col-sm-3"><a class="thumbnail" id="carousel-selector-13"><img src="http://placehold.it/150x150&amp;text=13"/></a></li>
        <li class="col-sm-3"><a class="thumbnail" id="carousel-selector-14"><img src="http://placehold.it/150x150&amp;text=14"/></a></li>
        <li class="col-sm-3"><a class="thumbnail" id="carousel-selector-15"><img src="http://placehold.it/150x150&amp;text=15"/></a></li>
        <li class="col-sm-3"><a class="thumbnail" id="carousel-selector-16"><img src="http://placehold.it/150x150&amp;text=16"/></a></li>
      </ul>
    </div>
    <!-- /Slider-->
  </div>
  <!-- 選擇出租方式 -->
  <div class="loc-rent-way">
    <p>請選擇上課時段出租方式</p>
    <ul>
      <li class="btn btn-default">小時出租</li>
      <li class="btn btn-default">時段出租</li>
      <li class="btn btn-default">人數出租</li>
    </ul>
  </div>
  <br>
  <hr>
</div>

<!-- 收費方式 -->
<div class="pick-rent-way">
  <div class="tab-left">
    <!-- 收費資訊 -->
    <div class="rent-info">
      <table class="table1">
        <thead>
          <tr>
            <th>每小時原價收費</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-warn"><span>NT$</span> 100</td>
          </tr>
        </tbody>
      </table>

      <table class="table2">
        <thead>
          <tr>
            <th>每小時原價收費</th>
            <th>最低收費</th>
            <th>最高收費</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-warn"><span>NT$</span> 100</td>
            <td>10 <span>人</span></td>
            <td>60 <span>人</span></td>
          </tr>
        </tbody>
      </table>
    </div>
    <!-- 收費表單 -->
    <div class="rent-form">
      <ul>
        <li class="btn btn-default btn-form1">固定時段</li>
        <li class="btn btn-default btn-form3">固定時段</li>
        <li class="btn btn-default btn-form2">自由選擇</li>
      </ul>
      <div class="form1"></div>
      <div class="form2"></div>
      <div class="form3"></div>
    </div>
    <!-- 月曆檢視 -->
    <div class="calendar-block">
      <div id="datetimepicker12"></div>
      <p><i class="fa fa-mouse-pointer"></i>提示：單擊滑鼠可選取日期，雙擊滑鼠取消選取。</p>
      <section class="time-block">
        <div>
          <i class="fa fa-chevron-down"></i>
        </div>
        <div class="info">
          <h2 class="month"></h2><span class="date"></span>
          <h6>NT$ 21720</h6>
        </div>
        <table class="table">
          <tbody>
            <tr>
              <td>09:00~10:00 <p>100%</p></td>
              <td>10:00~11:00 <p>100%</p></td>
              <td>11:00~12:00 <p>100%</p></td>
              <td>12:00~13:00 <p>100%</p></td>
              <td>13:00~14:00 <p>100%</p></td>
              <td>14:00~15:00 <p>100%</p></td>
            </tr>
            <tr>
              <td>15:00~16:00 <p>100%</p></td>
              <td>16:00~17:00 <p>100%</p></td>
              <td>17:00~18:00 <p>100%</p></td>
              <td>18:00~19:00 <p>100%</p></td>
              <td>19:00~20:00 <p>100%</p></td>
              <td>20:00~21:00 <p>100%</p></td>
            </tr>
          </tbody>
        </table>
      </section>
    </div>
  </div>

  <!-- 收費明細 -->
  <div class="tab-right">
  </div>
  <hr>
</div>

<script>
  $('.rent-calendar').load('../include/calendar.html');
  $('.tab-right').load('../include/location-calc-list.html');

  $('.form1').load('../include/location-form1.html');
  $('.form2').load('../include/location-form2.html');
  $('.form3').load('../include/location-form3.html');

  $('.form1,.form2,.form3,.pick-rent-way,.pick-image input[type="radio"],.pick-location,.time-block').hide();

  $('.pick-image label').click(function(){
    var location_title = $(this).find('span').text();
    $(this).find('img').addClass('active');
    $(this).siblings().find('img').removeClass('active');
    $('.pick-location').hide();
    $('.pick-location').find('h4').text(location_title);
    $('.pick-location').fadeIn();
    $('.pick-rent-way').fadeOut();
  })

  $('.loc-rent-way li, .rent-form li').click(function(){
    $(this).addClass('btn-warning');
    $(this).siblings().removeClass('btn-warning');
    $('.pick-rent-way').fadeIn();
  })

  $('.btn-form1').click(function(){
    $('.form1').show().siblings(':not(ul)').hide();
    $('.calendar-block').hide();
    show_error();
    reset_time();
    reset_calendar();
  })

  $('.btn-form2').click(function(){
    $('.form2').show().siblings(':not(ul)').hide();
    $('.time-block').fadeOut().find('td').removeAttr('class');
    $('.calendar-block').show();
    pick_day();
    // pick_a_day().stop();
    $('p:contains("衝突時段")').hide();
    $('.tab-right .table2').hide();
    $('#datetimepicker12 .datepicker table td').removeClass('dayactive');
    reset_calendar();
  })

  $('.btn-form3').click(function(){
    $('.form3').show().siblings(':not(ul)').hide();
    $('.calendar-block').hide();
    show_error();
    reset_time();
    reset_calendar();
  })

  function show_error(){
    $('p:contains("衝突時段")').show();
    $('.tab-right .table2').show();
  }

  $('.loc-rent-way li:contains("小時出租")').click(function(){
    $('.rent-form .btn-form3').hide().siblings().show().removeClass('btn-warning');
    $('.rent-info .table1').show().siblings().hide();
    $('.btn-form1').trigger('click');
    $('.tab-right .sum-info h4').text('小時出租');
  })

  $('.loc-rent-way li:contains("時段出租")').click(function(){
    $('.rent-form .btn-form1').hide().siblings().show().removeClass('btn-warning');
    $('.rent-info .table1').show().siblings().hide();
    $('.btn-form3').trigger('click');
    $('.tab-right .sum-info h4').text('時段出租');
  })

  $('.loc-rent-way li:contains("人數出租")').click(function(){
    $('.rent-form .btn-form3').hide().siblings().show().removeClass('btn-warning');
    $('.rent-info .table2').show().siblings().hide();
    $('.btn-form1').trigger('click');
    $('.tab-right .sum-info h4').text('人數出租');
  })

  //datetimepicker=======================================================
  
  calendar();
  pick_time();
  // pick_day();

  function pick_day(){
    var clicks = 0;
    $('.datepicker table td').click(function(){
      clicks++;
      var day = $(this).data("day");
      var m = day.slice(0,2);
      var d = day.slice(3,5);
      if(clicks == 1){
        $(this).addClass('dayactive');
        $(this).text('v'+ d);
        timer = setTimeout(function(){
          reset_time();
          $('.time-block .date').text(d);
          $('.time-block .month').text(m);
          clicks=0;
        }, 400);
      }else{
        clearTimeout(timer);
        if($(this).hasClass('dayactive')){
          var text = $(this).text();
          $(this).text(text.replace('v','x'));
          $(this).removeClass('dayactive');
          $('.time-block').fadeOut().find('td').removeAttr('class');
          $(this).text().replace('已選','取消');
        }
        clicks=0;
      }
    })
  }

  function pick_a_day(){
    $('.datepicker table td').click(function(){
      var day = $(this).data("day");
      var m = day.slice(0,2);
      var d = day.slice(3,5);
      reset_calendar();
      $(this).text('v'+ d).addClass('dayactive');
      reset_time();
      $('.time-block .date').text(d);
      $('.time-block .month').text(m);
    })
  }

  function calendar(){
    $('#datetimepicker12').datetimepicker({
        inline: true,
        sideBySide: true
    });

    $('#datetimepicker12 .datepicker').removeClass('col-md-6');
  }

  function pick_time(){
    $('.time-block td').click(function(){
      $(this).toggleClass('active');
      var tr_html = '<tr><td>1堂</td><td>2017/02/27 09:00~18:00 100%<br>9小時 NT$12000</td></tr>';
      $('.tab-right .table1 tbody').append(tr_html);
    })
  }

  function reset_calendar(){
    $('#datetimepicker12 .datepicker table td').removeClass('dayactive');
  }

  function reset_time(){
    // $('.time-block').fadeOut();
    $('.time-block').fadeIn().find('td').removeAttr('class');
  }

  //圖片輪播===============================================================
  $('#myCarousel').carousel({
              interval: 5000
      });
      //Handles the carousel thumbnails
      $('[id^=carousel-selector-]').click(function () {
      var id_selector = $(this).attr("id");
      try {
          var id = /-(\d+)$/.exec(id_selector)[1];
          console.log(id_selector, id);
          jQuery('#myCarousel').carousel(parseInt(id));
      } catch (e) {
          console.log('Regex failed!', e);
      }
  });
  // When the carousel slides, auto update the text
  $('#myCarousel').on('slid.bs.carousel', function (e) {
           var id = $('.item.active').data('slide-number');
          $('#carousel-text').html($('#slide-content-'+id).html());
  });
</script>
